--- 
layout: post
title: 模板
date: 2018-9-19
tags: java
---
### **struts2.xml模板**
``` 
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
<!--从这到30行可以完全不写-->
	<!-- 指定spring负责action对象的创建-->
	<constant name="struts.objectFactory" value="spring" />
	<!-- 所有匹配*.action的请求都由struts2处理-->
	<constant name="struts.action.extension" value="action" />
	<!--是否使用开发模式(错误反馈内容更多但耗性能)-->
    <constant name="struts.devMode" value="false" />
	<!--struts配置文件改动后，是否重新加载-->
	<constant name="struts.configuration.xml.reload" value="true" />
	<!--设置浏览器是否缓存静态内容-->
	<constant name="struts.serve.static.browserCache" value="false" />
	<!--请求参数的编码方式-->
	<constant name="struts.i18n.encoding" value="utf-8" />
	<!--每次HTTP请求系统都重新加载资源文件，有助于开发-->
	<constant name="struts.i18n.reload" value="true" />
	<!--文件最大上传值-->
	<constant name="struts.multipart.maxSize" value="104857600" />
	<!--让struts2支持动态方法调用-->
	<constant name="struts.enable.DynamicMethodInvocation" value="true" />
	<!--Action名称中是否可用斜线-->
	<constant name="struts.enable.SlashesInActionNames" value="false" />
	<!--允许标签中使用表达式语法-->
	<constant name="struts.tag.altSyntax" value="true" />
	<!--对于Weblogic，Orion,OC4J此属性应该设置为true-->
	<constant name="struts.dispatcher.parametersWorkaround" value="false" />
	<package name="shop" extends="struts-default" namespace="/">
		<!-- 配置自定义拦截器 -->
		<interceptors>
			<interceptor name="privilegeInterceptor" class="cn.itcast.shop.interceptor.PrivilegeInterceptor"/>
			
		</interceptors>
	
		<global-results>
			<result name="msg">/WEB-INF/jsp/msg.jsp</result>
			<result name="login">/admin/index.jsp</result>
		</global-results>
		
	
		<!--以下action可以在类里面用注解来配置
			@ParentPackage("shop")  上方31行 package的name
			@Namespace("/")	如果action的命名为/demo/*.action 则此处为/demp
			@Action(value="与类名相同") 如：userAction 开启了动态方法调用只需要配置一次（用userAction!test.action访问test方法），不在类名前配置则需要在类中的每个方法名前配置action
		-->
		<!-- 配置首页访问的Action -->
		<action name="index" class="indexAction">
			<result name="index">/WEB-INF/jsp/index.jsp</result>
		</action>
		
		<!-- 配置用户模块的Action -->
		<action name="user_*" class="userAction" method="{1}">
			<result name="registPage">/WEB-INF/jsp/regist.jsp</result>
			<result name="input">/WEB-INF/jsp/regist.jsp</result>
			<result name="loginPage">/WEB-INF/jsp/login.jsp</result>
			<result name="login">/WEB-INF/jsp/login.jsp</result>
			<result name="loginSuccess" type="redirectAction">index</result>
			<result name="quit" type="redirectAction">index</result>
			<result name="checkcodeFail">/WEB-INF/jsp/regist.jsp</result>
		</action>
		
		<!-- 验证码Action -->
		<action name="checkImg" class="checkImgAction"></action>
		
		<!-- 商品模块的Action -->
		<action name="product_*" class="productAction" method="{1}">
			<result name="findByPid">/WEB-INF/jsp/product.jsp</result>
			<result name="findByCid">/WEB-INF/jsp/productList.jsp</result>
			<result name="findByCsid">/WEB-INF/jsp/productList.jsp</result>
		</action>
		
		<!-- 购物车的Action -->
		<action name="cart_*" class="cartAction" method="{1}">
			<result name="addCart">/WEB-INF/jsp/cart.jsp</result>
			<result name="clearCart">/WEB-INF/jsp/cart.jsp</result>
			<result name="removeCart">/WEB-INF/jsp/cart.jsp</result>
			<result name="myCart">/WEB-INF/jsp/cart.jsp</result>
		</action>
		
		<!-- 订单的Action -->
		<action name="order_*" class="orderAction" method="{1}">
			<result name="saveOrder">/WEB-INF/jsp/order.jsp</result>
			<result name="findByUid">/WEB-INF/jsp/orderList.jsp</result>
			<result name="findByOid">/WEB-INF/jsp/order.jsp</result>
			<result name="updateStateSuccess" type="redirectAction">order_findByUid.action?page=1</result>
		</action>
		
		<!-- 后台登录Action -->
		<!-- 1代表name中的第一个*,2代表第一个* -->
		<action name="adminUser_*" class="adminUserAction" method="{1}">
			<!-- 不同的name对应的结果视图 -->
			<result name="loginFail">/admin/index.jsp</result>
			<result name="loginSuccess" type="redirect">/admin/home.jsp</result>
			<!-- 拦截器 -->
			<interceptor-ref name="privilegeInterceptor">
			<!-- 不拦截（放行login方法）：excludeMethods
				拦截：<param name="includeMethods">method1,method2</param> -->
				<!-- method-name：adminUser_login -->
				<param name="excludeMethods">login</param>
			</interceptor-ref>
			<!-- 拦截器缺省堆栈 -->
			<interceptor-ref name="defaultStack"/>
		</action>
		
		<!-- 后台一级分类管理Action -->
		<action name="adminCategory_*" class="adminCategoryAction" method="{1}">
			<result name="findAll">/admin/category/list.jsp</result>
			<result name="saveSuccess" type="redirectAction">adminCategory_findAll</result>
			<result name="deleteSuccess" type="redirectAction">adminCategory_findAll</result>
			<result name="editSuccess">/admin/category/edit.jsp</result>
			<result name="updateSuccess" type="redirectAction">adminCategory_findAll</result>
			
			<interceptor-ref name="privilegeInterceptor"/>
			<interceptor-ref name="defaultStack"/>
		</action>
		
		<!-- 后台二级分类管理Action -->
		<action name="adminCategorySecond_*" class="adminCategorySecondAction" method="{1}">
			<result name="findAll">/admin/categorysecond/list.jsp</result>
			<result name="addPage">/admin/categorysecond/add.jsp</result>
			<result name="saveSuccess" type="redirectAction">adminCategorySecond_findAll?page=1</result>
			<result name="deleteSuccess" type="redirectAction">adminCategorySecond_findAll?page=1</result>
			<result name="editSuccess">/admin/categorysecond/edit.jsp</result>
			<result name="updateSuccess" type="redirectAction">adminCategorySecond_findAll?page=1</result>
			<interceptor-ref name="privilegeInterceptor"/>
			<interceptor-ref name="defaultStack"/>
		</action>
		
		<!-- 后台商品管理的Action -->
		<action name="adminProduct_*" class="adminProductAction" method="{1}">
			<result name="findAll">/admin/product/list.jsp</result>
			<result name="addPageSuccess">/admin/product/add.jsp</result>
			<result name="saveSuccess" type="redirectAction">adminProduct_findAll.action?page=1</result>
			<result name="deleteSuccess" type="redirectAction">adminProduct_findAll.action?page=1</result>
			<result name="editSuccess">/admin/product/edit.jsp</result>
			<result name="updateSuccess" type="redirectAction">adminProduct_findAll.action?page=1</result>
			<interceptor-ref name="privilegeInterceptor"/>
			<interceptor-ref name="defaultStack"/>
		</action>
		
		<!-- 后台订单管理Action -->
		<action name="adminOrder_*" class="adminOrderAction" method="{1}">
			<result name="findAll">/admin/order/list.jsp</result>
			<result name="updateStateSuccess" type="redirectAction">adminOrder_findAll.action?page=1</result>
			<result name="findOrderItem" >/admin/order/orderItem.jsp</result>
			<interceptor-ref name="privilegeInterceptor"/>
			<interceptor-ref name="defaultStack"/>
		</action>
		
		<!-- 后台用户管理Action -->
		<action name="userAdmin_*" class="userAdminAction" method="{1}">
			<result name="findAll">/admin/user/list.jsp</result>
			<result name="deleteSuccess" type="redirectAction">userAdmin_findAll.action?page=1</result>
			<result name="editSuccess">/admin/user/edit.jsp</result>
			<result name="updateSuccess" type="redirectAction">userAdmin_findAll.action?page=1</result>
			<interceptor-ref name="privilegeInterceptor"/>
			<interceptor-ref name="defaultStack"/>
		</action>
	</package>
</struts>

```
### **web.xml**
``` 
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee 
    http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" 
    id="WebApp_ID" version="3.1">

    <!-- 配置spring核心监听器，默认会以 /WEB-INF/applicationContext.xml作为配置文件 -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <!-- contextConfigLocation参数用来指定Spring的配置文件加载项是哪个 -->
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext*.xml</param-value>
    </context-param>
	
	<!--另一种写法:更改applicationContext*.xml名称时应该放在classpath下，
	不能放在web-INF下，具体原因不知道
	    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring.xml</param-value>
    </context-param>
	-->

    <!-- 定义Spring MVC的前端控制器 -->
  <servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/springmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <!-- 让Spring MVC的前端控制器拦截所有请求 -->
  <servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!-- 编码过滤器 -->
  <filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
 </filter>
    <filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- jsp的配置 -->
  <jsp-config>
    <jsp-property-group>
         <!-- 配置拦截所有的jsp页面  -->
      <url-pattern>*.jsp</url-pattern>
       <!-- 可以使用el表达式  -->
      <el-ignored>false</el-ignored>
      <!-- 不能在页面使用java脚本 -->
      <scripting-invalid>true</scripting-invalid>
      <!-- 给所有的jsp页面导入要依赖的库，tablib.jsp就是一个全局的标签库文件  -->
      <include-prelude>/WEB-INF/jsp/taglib.jsp</include-prelude>
    </jsp-property-group>
  </jsp-config>

  <error-page>
    <error-code>404</error-code>
    <location>/404.html</location>
  </error-page>

  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

</web-app>
```

### **Servlet模板**
``` 
import java.io.*;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class MyServlet extends HttpServlet{
        public void doPost(HttpServletRequest request,HttpServletResponse response)throws ServletException,IOException{

        }
        public void doGet(HttpServletRequest request,HttpServletResponse response)throws ServletException,IOException{
            PrintWriter out = response.getWriter();
            out.println("some html formate string");
        }
}
```
