--- 
layout: post
title: 映射器
date: 2018-11-19
tags: Mybatis
---
映射器是mybatis最复杂最核心的组件
## **Sql Mapper（映射器）**
### **作用：**  
1）定义参数、2）描述缓存、3）描述SQL语句、4）定义查询结果和POJO的映射关系  
### **主要元素：** 
![enter description
here](https://viabcde.github.io/images/2018-10-10/2018101028.png) 
###  **引入映射器mapper的方法**  
**用文件路径引入映射器**                           		
``` 
<mappers>
			<mapper resource="对应mapper接口全路径的配置文件">
                </mappers>
```

**用包名引入映射器**                           
``` 
<mappers>
			<mapper resource="对应mapper接口包的全路基">
		</mappers>
```

**用类注册引入映射器**                          
``` 
<mappers>
			<mapper resource="对应mapper接口类的路径">
		</mappers>
```

**用xml配置文件引入映射器**                          
``` 
<mappers>
			<mapper url="file:///var/mappers+文件路径">
		</mappers>
```

### **引入映射器步骤**

**定义映射器接口RoleMapper.java**                      

``` 
package com.liming.domain.mapper;
import com.liming.domain.po.Role;
public interface RoleMapper{
	public Role getRole(Long id);
}
```

 **对应映射器接口的配置文件RoleMapper.xml：定义mapper映射规则和SQL语句**

``` 
<?xml version="1.0" encoding="UTF-8" ?>  
    <!DOCTYPE mapper PUBLIC   
        "-//mybatis.org//DTD Mapper 3.0//EN"  
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
    <mapper namespace="com.liming.domain.mapper.RoleMapper">  
        <select id="getRole" parameterType="long" resultType="role">  
            select id, role_name as roleName from t_role where id = #{id} 
        </select>  
    </mapper>  
```
**在核心配置SqlMapConfig.xml文件中引入映射器**

``` 
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-config.dtd">
<configuration>	
	<!-- 别名定义 -->
	<typeAliases>
		<typeAlias alias="role" type="com.liming.domain.po.Role"/>
	</typeAliases>
	<!--定义数据库信息，默认使用development数据库构建环境-->
	<environments default="development">
		<environment id="development">
			<!--采用jdbc事务管理-->
			<transactionMapper type="JDBC"/>
			<!--配置数据库链接信息-->
			<dataSource type="POOLED">
				<property name="driver" value="com.mysql.jdbc.Driver"/>
				<property name="url" value="jdbc:mysql://localhost:3306/mybatis"/>
				<property name="username" value="root"/>
				<property name="password" value="****"/>
			</dataSource>	
		</environment>
	</environments>
	<!--定义映射器-->
	<mappers>
		<mapper resource="com/liming/domain/mapper/roleMapper.xml"/>
	</mappers>
</configuration>
```
