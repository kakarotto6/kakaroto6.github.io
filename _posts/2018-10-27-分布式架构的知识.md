--- 
layout: post
title: 分布式架构学习
date: 2018-10-26
tags: 分布式
---
### **冯诺依曼模型（第一台计算机）**
组成部分：输入设备--存储器（运算器+控制器）--输出设备
### **IBM大型机时代**
集中式计算机系统，小企业用不起（贵）  
培养成本高（系统复杂）  
出现故障，整个系统都坏了  
### **集群和分布式**
分布式：一个业务拆分为多个子业务部署在不同的服务器上，保证高性能。比如电商平台拆分为：用户，商品，订单。 
集群：同一个业务部署在多个服务器上，保证高可用。
### **什么是分布式？**
由多个小型计算机服务器通过网络连接起来，组成一个大型的计算机服务器。 
需要解决两件事情：任务分解，节点通信。
### **节点**
一个节点就是一个进程，依据分布式协议完成一定的逻辑操作的进程
### **副本机制**
数据副本指在不同的节点上持久化同一份数据,当出现某一个节点的数据丢失时,可以从副本读取数据。数据副本是分布式系统中结果数据丢失的唯一手段。

服务副本表示的是多个节点提供相同的服务,通过主从关系来实现服务的高可用方案
### **大型网站的特点**
1.访问量（tps、qps） 
2.数据量（存储数据量）
### **主流电商的核心业务**

用户，商品，订单

### **电商对应的技术**

容器：tomcat，jsp/servlet 
数据库存储：MySQL
### **第一版 单台服务器应用**
最初的架构，应用程序、数据库、文件都部署在一台服务器上   
出现以下问题： 
由于流量越来越大出现服务器性能问题
### **第二版 应用服务器和数据库服务器分离**
随着业务的扩展，一台服务器已经不能满足性能需求，故将应用程序、数据库、文件各自部署在独立的服务器上，并且根据服务器的用途配置不同的硬件，达到最佳的性能效果，有效的缓解了应用服务器负载的压力。 
出现以下问题： 
随着请求流量得进一步增大出现应用服务器性能问题。
### **第三版 应用服务器集群**
流量请求得到缓解。 
应用服务器集群后出现以下问题： 
这么多的服务器该交由那一台服务器，或者说怎么合理分配任务利用率最高呢？
1.需要使用session+cookie维护用户 
2.如何做请求转发（cdn，前端做负载均衡器）
### **第四版 负载均衡器**
1.负载均衡器优化了访问请求在服务器组之间的分配，消除了服务器之间的负载不平衡，从而提高了系统的反应速度与总体性能； 
2.负载均衡器可以对服务器的运行状况进行监控，及时发现运行异常的服务器，并将访问请求转移到其它可以正常工作的服务器上，从而提高服务器组的可靠性采用了负均衡器器以后，可以根据业务量的发展情况灵活增加服务器，系统的扩展能力得到提高，同时简化了管理。

负载均衡器之后出现以下问题： 
解决了应用服务器集群问题，但随着流量的新增，数据库服务器也出现了性能压力，数据库遇到瓶颈。
### **第五版 数据库服务器集群**
数据库服务器集群后出现以下问题： 
这么多的数据库服务器，该如何制定存取策略，哪些服务器是负责存的，而哪些又是负责取得呢
1.数据库读写分离 
2.数据库数据同步 
3.数据库路由
而且如果是电商平台，用户量是没有上限的，数据该实时同步还是定时隔时同步呢？
### **第六、七版**
解决方法：搜索引擎集群和在读取之上增加缓存服务器
### **第八版 数据库水平/垂直拆分**
数据库服务器按照不同业务模块分离，单独使用服务器
### **第九版 应用拆分**
不同的应用负责相应的业务
问题：应用之间如何通信
### **第十版 SOA服务（分布式架构）**
最后第十版就不是web应用服务了，应用服务拆分为服务节点，属于微服务了。
----------完美的分割线----------
### **CDN加速静态文件的访问**
CDN即内容分发网络，☞针对一些更新频率不是很高的静态文件进行缓存处理，并尽可能地将用户的请求重新导向离用户最近的的服务节点上，减少用户访问资源的时间

